# Zyng

> LLM のワークフローとログを、時間とメタデータつきの「実行可能なテキスト」として書くための小さな言語。

---

## 概要

Zyng は、LLM（大規模言語モデル）まわりの:

- プロンプト  
- ワークフロー  
- 設定  
- ログ  
- 軽いテスト  

を、Markdown や YAML / JSON や Python スクリプトに分散させるのではなく、  
**1つのテキスト言語**として記述することを目指した実験的なプロジェクトです。

コアとなる発想は次の 2 つです。

- **timeline-first（時間優先）**  
  「いつの話か？」を最初から一級市民として扱います。  
  `:::now` / `:::yest` / `:::tomo` / `:::at:"..."` のような time メタ情報を、言語レベルで扱います。

- **人間にも LLM にも扱いやすいテキスト**  
  人間から見ると「ちょっと変な英語」ですが、がんばれば読めるテキスト。  
  LLM から見ると、構造化しやすい半構造化テキストになることを目指しています。

このリポジトリには、現時点では **ごく小さなプレリリース（v0.0.1）** が含まれています。

- 最小限の runner  
- `show` を中心とした小さな Core 構文  
- Markdown 内の ```zyng フェンスブロックを実行する機能  

---

## Zyng が解決しようとしている問題

LLM を使った開発や運用では、よく次のようなことが起こります。

- README / ドキュメントと、実際のプロンプトやコードが少しずつズレていく  
- 「人間が触る層」が、Markdown / YAML / JSON / Python / コメント に分散してカオス化する  
- ログを残しても、
  - いつの実行なのか  
  - どのモデル・ポリシーで生成されたのか  
  - それが「ログ用」なのか「学習用」なのか「テスト用」なのか  
  が後からよくわからない  

Zyng はこれに対して:

- **time** を一級市民として明示し、  
- 将来的には **role / kind / use** のようなメタ情報もテキスト側に引き上げることで、

LLM のワークフローとログを、**再現しやすく・読み返しやすいタイムライン**として書けるようにすることを目指しています。

---

## Zyng は何で、何ではないか

Zyng は:

- LLM のワークフローとログのための **timeline-first な DSL**  
- プロンプト／ワークフロー／ログを **1つの実行可能なテキスト**として書くための言語  
- Python や LLM API の **前段に座るフロントエンド言語**

Zyng が **目指していない** のは:

- Python や Rust と競合する汎用プログラミング言語になること  
- 高速なランタイムや高度な型システムで勝負すること  
- すべての設定ファイルやコードを Zyng に置き換えること  

重い計算やアプリケーション本体のロジックは、これまで通り Python などに任せます。  
Zyng が扱うのは、**タイムライン・メタデータ・実行可能ドキュメントとしてのテキスト層**です。

---

## ステータス

- バージョン: `0.0.1`  
- 安定性: **実験的 / プレリリース**  

v0.0.1 で実装されているもの:

- PyPI 上の Python パッケージ `zyng`  
- Markdown 内の ```zyng フェンスブロックを実行する最小 runner  
- `show "..."` と、行末の `:::` 以降に書かれた簡単なメタ情報  
- 以下の time メタの基本的な扱い:
  - `:::now`
  - `:::yest`
  - `:::tomo`
  - `:::at:"2025-12-03T21:00:00+09:00"`

`timetst.md` を実行したときの出力例:

```text
[now] Now message
[yest] Yesterday message
[tomo] Tomorrow message
[at:"2025-12-03T21:00:00+09:00"] Exact time
```

現時点の Zyng は、**動く最小 runner を持った設計スケッチ**として捉えてもらえるとちょうどよいです。

---

## インストール

Zyng は PyPI に公開されています。

```bash
pip install zyng==0.0.1
```

インストール済みかどうかは、次のコマンドで確認できます。

```bash
pip show zyng
```

---

## 最小の使い方

例えば `timetst.md` という Markdown ファイルを作り、次のような Zyng ブロックを書きます。

```zyng
show "Now message" :::now
show "Yesterday message" :::yest
show "Tomorrow message" :::tomo
show "Exact time" :::at:"2025-12-03T21:00:00+09:00"
```

そのうえで次のように実行します。

```bash
python -m zyng.runner timetst.md
```

runner は次のように動きます。

1. Markdown ファイルから ```zyng フェンスブロックを探す  
2. 各行をパースする  
3. `show` コマンドを実行し、メタ情報付きで標準出力に表示する  

v0.0.1 時点の挙動は以下の通りです。

- `show "Message" :::now`  
  → `[now] Message`
- `show "Message" :::yest`  
  → `[yest] Message`
- `show "Message" :::tomo`  
  → `[tomo] Message`
- `show "Message" :::at:"2025-12-03T21:00:00+09:00"`  
  → `[at:"2025-12-03T21:00:00+09:00"] Message`

メタ情報は、まだ datetime オブジェクトとしては解釈しておらず、  
**読みやすい構造化プレフィックスとして露出しているだけ**です。

---

## コア設計アイデア

Zyng の長期的な設計では、行ごとに次の 4 つのメタ情報を持てるようにしたいと考えています。

- **time** – いつの話か
  - `now`, `yest`, `tomo`, `:::at:"..."`
- **role** – 誰の視点か / どのエージェントか
  - 例: `:::role:"self"`, `:::role:"planner-ai"`（将来）
- **kind** – これはどんな種類の記述か
  - 例: `fact`, `feeling`, `plan`, `policy`（将来）
- **use** – この行を何に使うつもりか
  - 例: `log`, `train`, `test`, `policy`（将来）

将来的には、次のような行を書けることを目指しています。

```zyng
show "User asked about travel to Osaka."
  :::now
  :::role:"user"
  :::kind:"fact"
  :::use:"log"
```

人間も LLM も、このメタ情報を読むことで、

- 「今」についての  
- 「ユーザーの発話」のログであり  
- 「事実レベル」の内容で  
- 「学習やテストに再利用され得るテキスト」

であることを理解しやすくなります。

v0.0.1 では **time** だけが runner に反映されており、  
`role` / `kind` / `use` は設計段階のキーワードとしてのみ存在しています。

---

## ロードマップ（ラフ案）

まだラフな計画ですが、現時点では次のように考えています。

### v0.0.x – 最小 runner（現在）

- [x] PyPI の Python パッケージ `zyng`  
- [x] Markdown 内の ```zyng フェンスブロックを実行  
- [x] メタ情報付きの `show` コマンド  
- [x] `now` / `yest` / `tomo` / `at:"..."` の生メタ情報の扱い  

### v0.1 – Core 言語 & README runner

- Core 構文の定義と安定化:
  - `show`
  - `read`
  - `write`
  - `use`
  - `let`
- `docs/zyng_core_v0.1.md` として Core 仕様を文書化
- README をより堅牢に「実行可能ドキュメント」として扱えるようにする
- Core はできるだけ小さく保ち、複雑な処理は Python 側に寄せる

### v0.2 – 他者が輸入しやすい段階

- 2〜3 個のサンプルプロジェクト:
  - ログ＋タイムライン系
  - 小さな LLM ワークフロー（ダミーの呼び出しでも可）
- 「自分のプロジェクトで Zyng を採用するには？」ガイドを書く
- Zyng → Python dict / 各種 LLM API 呼び出しへのマッピング例を用意
- Core 仕様を基本的に後方互換で扱い始める

---

## ステータスとフィードバックについて

Zyng は現在、非常に初期の実験段階（`v0.0.1`）です。  
言語設計やランタイム構成に関するアイデア・フィードバック・議論はいつでも歓迎します。

---

## 著者

- 設計 & 実装: **Yo Kobayashi**  
  - Contact: **yaw.kobayashi@proton.me**

Zyng は、LLM ワークフローのための「時間とメタデータを持ったテキスト」を探る、個人的な実験プロジェクトです。  
もし Zyng に触発されて何かを作った場合は、このリポジトリへのリンクや一言メモを足してもらえるととても嬉しいです。

---

## ライセンス

Zyng は現在、**MIT License** のもとで公開されています。  
（将来変更がある場合は、このセクションを更新します。）
